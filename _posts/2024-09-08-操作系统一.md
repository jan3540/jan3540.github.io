---
layout: mypost
title: 操作系统（一）控制系统启动
categories: [Linux,操作系统]
---

## 操作系统（一）控制系统启动

### 修改bootsect.s文件

```bash
entry _start
_start:
    !使用 0x10 号中断读取光标位置
    mov ah,#0x03
    xor bh,bh
    int 0x10
 
    !显示字符串 “Hello OS world, my name is LQN”
    !cx 为要显示字符串的长度（除字符串外还有3个换行+1个回车）
    mov cx,#36
    mov bx,#0x0007
 
    ! es:bp 为显示字符串的地址
    mov bp,#msg1
    mov ax,#0x07c0
    mov es,ax
    mov ax,#0x1301
    int 0x10
 
!设置一个无限循环
inf_loop:
    jmp inf_loop
 
!设置显示字符串
msg1:
    !回车+换行
    .byte   13,10
    .ascii  "Hello OS world, my name is JJT"
    !两对 “回车+换行”
    .byte   13,10,13,10
 
!boot_flag 必须在最后两个字节
.org 510
!设置引导扇区标记 0xAA55（必须设置，否则无法成功引导）
boot_flag:
    .word   0xAA55
```





### 设置开机引导字符

![image](0.1.png)



```bash
 #汇编 bootsect.s 为 16 位目标文件 bootsect.o
 as86 -0 -a -o bootsect.o bootsect.s
 
 #将目标文件 bootsect.o 链接成可执行文件 bootsect，这是引导扇区的最终可执行镜像
 ld86 -0 -s -o bootsect bootsect.o
 
 #将 bootsect 文件的一部分（跳过前 32 字节）复制到 Image 文件，创建一个最终可用的引导扇区镜像。
 dd bs=1 if=bootsect of=Image skip=32
 cp ./Image ../Image
 ../../run

```

![](0.2.png)


<p align="right">作于2024年09月08日</p>